<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßÿÆÿ™ÿ®ÿßÿ± GeoTools Suite - Test</title>
    <link rel="stylesheet" href="./docs/styles.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section {
            background: var(--card-bg);
            border: 2px solid var(--border);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .test-item { margin: 10px 0; padding: 10px; background: var(--primary-light); border-radius: 4px; }
        .status-ok { color: #10b981; font-weight: bold; }
        .status-warn { color: #f59e0b; font-weight: bold; }
        code { background: var(--bg); padding: 2px 6px; border-radius: 3px; font-family: monospace; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <h1>üß™ GeoTools Suite - Test Dashboard</h1>
    
    <div class="test-section">
        <h2>üì± Dark Mode Test</h2>
        <div class="test-item">
            Current Mode: <span id="darkModeStatus">Loading...</span>
        </div>
        <div class="test-item">
            Toggle Button Present: <span id="toggleStatus">Checking...</span>
        </div>
        <button onclick="testDarkMode()">Test Dark Mode</button>
    </div>

    <div class="test-section">
        <h2>üîÑ Service Worker Test</h2>
        <div class="test-item">
            Service Worker Status: <span id="swStatus">Checking...</span>
        </div>
        <div class="test-item">
            Cache Status: <span id="cacheStatus">Checking...</span>
        </div>
        <button onclick="testServiceWorker()">Clear Cache</button>
    </div>

    <div class="test-section">
        <h2>üì¶ Minification Test</h2>
        <div class="grid">
            <div>
                <h3>CSS Files</h3>
                <div class="test-item">Original: <code>styles.css</code></div>
                <div class="test-item">Minified: <code>dist/styles.min.css</code></div>
            </div>
            <div>
                <h3>JavaScript Files</h3>
                <div class="test-item">Original: <code>theme.js</code></div>
                <div class="test-item">Minified: <code>dist/theme.min.js</code></div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>üìä Performance Metrics</h2>
        <div class="test-item">
            Page Load Time: <span id="loadTime">Calculating...</span>
        </div>
        <div class="test-item">
            Total Requests: <span id="requestCount">Calculating...</span>
        </div>
        <button onclick="logPerformance()">Show Metrics</button>
    </div>

    <div class="test-section">
        <h2>‚úÖ Feature Checklist</h2>
        <div id="features"></div>
    </div>

    <div class="test-section">
        <h2>üìÅ File Structure Verification</h2>
        <div id="fileStatus"></div>
    </div>

    <script src="./docs/theme.js"></script>
    <script>
        // Test functions
        function testDarkMode() {
            const darkMode = new DarkModeManager();
            darkMode.toggle();
            updateDarkModeStatus();
        }

        function updateDarkModeStatus() {
            const isDark = document.body.classList.contains('dark-mode');
            document.getElementById('darkModeStatus').innerHTML = 
                `<span class="status-ok">${isDark ? 'üåô Dark' : '‚òÄÔ∏è Light'}</span>`;
            
            const toggle = document.querySelector('.dark-mode-toggle');
            document.getElementById('toggleStatus').innerHTML = 
                toggle ? '<span class="status-ok">‚úÖ Found</span>' : '<span class="status-warn">‚ö†Ô∏è Not found</span>';
        }

        function testServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations()
                    .then(registrations => {
                        if (registrations.length > 0) {
                            registrations[0].unregister();
                            document.getElementById('swStatus').innerHTML = 
                                '<span class="status-ok">‚úÖ Unregistered</span>';
                        }
                    });
            }
        }

        function logPerformance() {
            if (window.performance && window.performance.timing) {
                const timing = window.performance.timing;
                const metrics = {
                    'DNS': timing.domainLookupEnd - timing.domainLookupStart,
                    'TCP': timing.connectEnd - timing.connectStart,
                    'Response': timing.responseEnd - timing.responseStart,
                    'DOM': timing.domComplete - timing.domLoading,
                    'Load': timing.loadEventEnd - timing.navigationStart
                };
                
                let output = '';
                for (let [name, value] of Object.entries(metrics)) {
                    output += `<div class="test-item">${name}: ${value}ms</div>`;
                }
                document.getElementById('fileStatus').innerHTML = output;
            }
        }

        // Initialize on load
        window.addEventListener('load', () => {
            // Update dark mode status
            updateDarkModeStatus();

            // Check Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.ready.then(() => {
                    document.getElementById('swStatus').innerHTML = 
                        '<span class="status-ok">‚úÖ Registered & Ready</span>';
                }).catch(() => {
                    document.getElementById('swStatus').innerHTML = 
                        '<span class="status-warn">‚ö†Ô∏è Not available</span>';
                });
            }

            // Check Cache
            caches.keys().then(names => {
                const hasCache = names.length > 0;
                document.getElementById('cacheStatus').innerHTML = 
                    `<span class="status-${hasCache ? 'ok' : 'warn'}">${hasCache ? '‚úÖ' : '‚ö†Ô∏è'} ${names.length} cache(s)</span>`;
            });

            // Performance metrics
            const perfData = window.performance.timing;
            const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
            document.getElementById('loadTime').innerHTML = 
                `<span class="status-ok">${pageLoadTime}ms</span>`;

            // Feature checklist
            const features = [
                { name: 'Dark Mode Manager', check: () => typeof DarkModeManager !== 'undefined' },
                { name: 'Lazy Load Manager', check: () => typeof LazyLoadManager !== 'undefined' },
                { name: 'Caching Manager', check: () => typeof CachingManager !== 'undefined' },
                { name: 'Page Transitions', check: () => typeof PageTransitionManager !== 'undefined' },
                { name: 'Mobile Enhancements', check: () => typeof MobileEnhancements !== 'undefined' },
                { name: 'Responsive Helper', check: () => typeof ResponsiveHelper !== 'undefined' },
                { name: 'Keyboard Navigation', check: () => typeof KeyboardNavigation !== 'undefined' },
                { name: 'Performance Monitor', check: () => typeof PerformanceMonitor !== 'undefined' },
            ];

            let featureHtml = '';
            features.forEach(f => {
                const ok = f.check();
                featureHtml += `<div class="test-item">${ok ? '‚úÖ' : '‚ùå'} ${f.name}</div>`;
            });
            document.getElementById('features').innerHTML = featureHtml;

            // File structure
            const files = [
                { name: 'docs/styles.css', url: './docs/styles.css' },
                { name: 'docs/theme.js', url: './docs/theme.js' },
                { name: 'docs/service-worker.js', url: './docs/service-worker.js' },
                { name: 'docs/dist/styles.min.css', url: './docs/dist/styles.min.css' },
                { name: 'docs/dist/theme.min.js', url: './docs/dist/theme.min.js' },
            ];

            let fileHtml = '';
            files.forEach(f => {
                fileHtml += `<div class="test-item">üìÑ ${f.name}</div>`;
            });
            document.getElementById('fileStatus').innerHTML = fileHtml;
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GeoTools Admin Generator (Local)</title>
  <link rel="stylesheet" href="admin.css" />
</head>
<body>
  <div
    id="admin-loader"
    role="status"
    aria-live="polite"
    aria-hidden="false"
    aria-label="Loading admin workspace"
  >
    <div class="admin-loader-content">
      <div class="admin-loader-spinner" aria-hidden="true"></div>
      <div class="admin-loader-title">Welcome to GeoTools Admin</div>
      <div id="admin-loader-text" class="admin-loader-text">Preparing your admin workspace...</div>
    </div>
  </div>

  <div class="admin-layout">
    <header class="admin-topbar" role="banner" aria-label="Admin top navigation">
      <div class="admin-topbar-left">
        <button
          type="button"
          class="admin-menu-toggle"
          data-admin-sidebar-toggle
          aria-label="Toggle admin sidebar"
          aria-expanded="false"
          aria-controls="adminSidebarNav"
        >
          <span></span><span></span><span></span>
        </button>
        <a href="./index.html" class="admin-brand" aria-label="GeoTools Admin Home">
          <span class="admin-brand-mark" aria-hidden="true"></span>
          <span class="admin-brand-text">GeoTools Admin</span>
        </a>
      </div>
      <div class="admin-topbar-right">
        <a href="../index.html" class="admin-open-site-link">Open Main Site</a>
      </div>
    </header>

    <div class="admin-body">
      <aside id="adminSidebarNav" class="admin-sidebar" role="navigation" aria-label="Admin sections">
        <div class="admin-sidebar-head">
          <p class="admin-sidebar-title">Workspace</p>
          <p class="admin-sidebar-subtitle">Management</p>
        </div>
        <div class="admin-sidebar-links">
          <button type="button" class="admin-side-link active" data-admin-nav-target="tools">
            Page Editor
          </button>
          <button type="button" class="admin-side-link" data-admin-nav-target="crs">
            CRS Manager
          </button>
        </div>
      </aside>

      <button
        type="button"
        class="admin-sidebar-backdrop"
        data-admin-sidebar-backdrop
        aria-label="Close admin sidebar"
      ></button>

      <section class="admin-main">
        <div id="app-container">
          <main class="admin-shell">
    <header class="admin-hero">
      <div class="hero-copy">
        <p class="hero-tag">GeoTools Suite</p>
        <h1>Admin Generator</h1>
        <p class="muted">Generate and stage page changes locally before exporting them to project files.</p>
      </div>
      <div class="hero-glance">
        <span class="glance-item">Pages Studio</span>
        <span class="glance-item">Live Preview</span>
        <span class="glance-item">Safe Export</span>
      </div>
    </header>

    <div class="tabs">
      <button type="button" class="tab-btn active" data-tab="tools">تعديل الصفحات</button>
      <button type="button" class="tab-btn" data-tab="crs">تعديل الاحداثيات</button>
    </div>

    <section class="panel tab-panel active" data-tab="tools">
      <h2>Tool Generator</h2>
      <div class="panel-swiper">
        <div class="swipe-item">
          <div class="tool-load">
            <button id="refreshPagesBtn" type="button" class="secondary">Refresh Pages</button>
          </div>
          <div id="toolStatus" class="muted"></div>

          <div class="pages-catalog">
            <div id="pagesCardsGrid" class="pages-cards-grid"></div>
          </div>
        </div>

        <div class="swipe-item">
          <div class="tool-hint">
            <h3>لمحة سريعة</h3>
            <ul>
              <li><strong>Page Title</strong>: عنوان الصفحة.</li>
              <li><strong>Tool ID</strong>: اسم الصفحة والملفات (slug).</li>
              <li><strong>Description</strong>: وصف يظهر في لوحة التحكم.</li>
              <li><strong>HTML/CSS/JS</strong>: محتوى الملفات الحالية أو الجديدة.</li>
            </ul>
          </div>
        </div>

        <div class="swipe-item">
          <div class="editor-review">
            <div class="editor-col">
              <section class="form-grid">
                <label>Page Title<input id="titleInput" type="text" placeholder="New Tool" /></label>
                <label>Tool ID (slug)<input id="idInput" type="text" placeholder="my-tool" /></label>
                <label>Description<textarea id="descInput" rows="2" placeholder="Short description"></textarea></label>
                <label class="editor-field">
                  HTML
                  <div id="htmlEditor" class="code-editor" aria-label="HTML editor"></div>
                  <textarea id="htmlInput" class="raw-editor" rows="10"></textarea>
                </label>
                <label class="editor-field">
                  CSS
                  <div class="asset-picker">
                    <span class="asset-picker-label">CSS File</span>
                    <select id="cssFileSelect" class="asset-picker-select"></select>
                  </div>
                  <div id="cssEditor" class="code-editor" aria-label="CSS editor"></div>
                  <textarea id="cssInput" class="raw-editor" rows="10"></textarea>
                </label>
                <label class="editor-field">
                  JS
                  <div class="asset-picker">
                    <span class="asset-picker-label">JS File</span>
                    <select id="jsFileSelect" class="asset-picker-select"></select>
                  </div>
                  <div id="jsEditor" class="code-editor" aria-label="JavaScript editor"></div>
                  <textarea id="jsInput" class="raw-editor" rows="10"></textarea>
                </label>
              </section>

              <section class="actions">
                <button id="downloadBtn" type="button">Download Package</button>
                <button id="exportChangesBtn" type="button">Export Changes To Project</button>
              </section>

              <section class="output">
                <h3>Patch Instructions</h3>
                <pre id="instructions"></pre>
              </section>
            </div>

            <aside class="review-col">
              <h3>Live Preview</h3>
              <div id="previewSummary" class="muted">Select a page to start preview.</div>
              <div class="preview-card">
                <iframe id="livePreviewFrame" class="live-preview-frame" title="Live page preview"></iframe>
              </div>

              <h3>Review</h3>
              <div id="reviewSummary" class="muted">Select a page to start review.</div>

              <div class="review-card">
                <h4>HTML Diff</h4>
                <pre id="reviewHtmlDiff" class="diff-box"></pre>
              </div>
              <div class="review-card">
                <h4>CSS Diff</h4>
                <pre id="reviewCssDiff" class="diff-box"></pre>
              </div>
              <div class="review-card">
                <h4>JS Diff</h4>
                <pre id="reviewJsDiff" class="diff-box"></pre>
              </div>
            </aside>
          </div>
        </div>
      </div>
    </section>

    <section class="panel tab-panel" data-tab="crs">
      <h2>CRS Manager</h2>
      <p class="muted">Edit and export CRS definitions as JSON (uses Proj4 or built-in adapters). The list auto-loads from the project file.</p>
      <div class="panel-swiper">
        <div class="swipe-item">
          <div class="crs-actions">
            <button id="crsExportBtn" type="button">Export CRS JSON</button>
            <button id="crsClearBtn" type="button" class="secondary">Clear List</button>
          </div>

          <div class="crs-hint">
            <h3>لمحة سريعة</h3>
            <ul>
              <li><strong>Key</strong>: اسم فريد للنظام (مثال: <code>utm41n</code> أو <code>epsg4326</code>).</li>
              <li><strong>Label</strong>: الاسم المعروض للمستخدم.</li>
              <li><strong>Type</strong>: <code>projected</code> أو <code>geographic</code>.</li>
              <li><strong>Proj4</strong>: تعريف الإسقاط (اتركه فارغًا لو تستخدم Adapter).</li>
              <li><strong>Adapter</strong>: اسم تحويل مخصص موجود بالكود مثل <code>dltm</code>.</li>
            </ul>
          </div>

          <div class="form-grid">
            <label>Key<input id="crsKey" type="text" placeholder="epsgXXXX or custom key" /></label>
            <label>Label<input id="crsLabel" type="text" placeholder="Readable name" /></label>
            <label>Type
              <select id="crsType">
                <option value="geographic">geographic</option>
                <option value="projected">projected</option>
              </select>
            </label>
            <label>Proj4 definition
              <textarea id="crsProj4" rows="3" placeholder="+proj=utm ..."></textarea>
            </label>
            <label>Adapter (built-in)
              <select id="crsAdapter">
                <option value="">None</option>
                <option value="dltm">dltm (DLTM custom math)</option>
              </select>
            </label>
          </div>

          <div class="actions">
            <button id="crsSaveBtn" type="button">Add / Update CRS</button>
            <button id="crsResetBtn" type="button" class="secondary">Reset Form</button>
          </div>

          <div id="crsStatus" class="muted"></div>
        </div>

        <div class="swipe-item">
          <div class="crs-table-wrap">
            <table class="crs-table">
              <thead>
                <tr>
                  <th>Key</th>
                  <th>Label</th>
                  <th>Type</th>
                  <th>Method</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="crsTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
          </main>
          <div class="legal-line" aria-label="Copyright notice">© 2026 GeoTools Suite — All rights reserved.</div>
        </div>
      </section>
    </div>
  </div>
  <script src="../vendor/ace/ace.js"></script>
  <script src="../vendor/ace/mode-html.js"></script>
  <script src="../vendor/ace/mode-css.js"></script>
  <script src="../vendor/ace/mode-javascript.js"></script>
  <script src="../vendor/ace/theme-one_dark.js"></script>
  <script src="admin.js"></script>
</body>
</html>

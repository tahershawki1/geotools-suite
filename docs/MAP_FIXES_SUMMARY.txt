تقرير التعديلات على DLTM.html
================================

✅ 1. تثبيت ارتفاع الخريطة
   - عنصر الخريطة: <div id="map" style="height:320px; ..."></div>
   - ارتفاع ثابت: 320px
   - إطار حدود وزوايا مستديرة مضافة

✅ 2. استبدال دوال Leaflet بكود محسّن
   - destroyMapIfAny(): يزيل الخريطة القديمة بشكل آمن
   - ensureMap(): يتعامل مع _leaflet_id القديمة
   - showPointOnMap(): استخدام requestAnimationFrame و invalidateSize(true)
   
   المميزات الجديدة:
   - يعالج "Map container is already initialized"
   - ينتظر إظهار mapBox قبل تهيئة الخريطة
   - يعيد حساب مقاسات Leaflet بدقة (120ms delay)

✅ 3. استدعاء showPointOnMap
   - في runSingleDltm() بعد عرض النتائج
   - ينقل المستخدم تلقائياً إلى الخريطة

✅ 4. إضافة تفاعل Batch
   - اضغط على أي صف في جدول النتائج الجماعية
   - يعرض النقطة على الخريطة تلقائياً
   - cursor تتغير إلى "pointer" للإشارة للتفاعل

✅ 5. ملف اختبار
   - MAP_DEBUG.js: سكريبت جاهز للاختبار في Console
   - يتحقق من: ارتفاع الخريطة، تحميل Leaflet، حالة الخريطة

---

الاختبار السريع في Console:
1. افتح DevTools (F12)
2. انتقل إلى Console tab
3. انسخ ولصق محتوى MAP_DEBUG.js
4. أدخل إحداثيات وقم بالتحويل
5. تحقق من ظهور الخريطة

الأوامر:
- document.getElementById("map")?.clientHeight → يجب 320
- typeof L → يجب "object"
- _map && _map._loaded → يجب true (بعد التحويل)

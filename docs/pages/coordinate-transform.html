<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coordinate Transformation - GeoTools Suite</title>
  <link rel="stylesheet" href="../styles.css" />
  <!-- Theme.js removed: No dark mode or theme switching -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.11.0/proj4.js"></script>
</head>
<body>

<style>
  .container-transform {
    max-width: 650px;
    width: 100%;
    margin: 0 auto;
    background: var(--card-bg, #fff);
    border: 1px solid var(--border);
    border-radius: 24px;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    margin-top: 20px;
    display: flex;
    flex-direction: column;
  }
  .content-trans { padding: 30px; }

  .input-group { margin-bottom: 20px; }
  .input-group label { display: block; font-weight: 700; margin-bottom: 8px; color: var(--text-main); font-size: 14px; }
  .input-group input, .input-group select { width: 100%; padding: 12px 15px; border-radius: 12px; border: 1px solid var(--border); font-size: 16px; outline: none; }

  .res-box-trans { margin-top: 25px; background: var(--primary-light); padding: 20px; border-radius: 16px; border: 1px solid var(--primary); display: none; }
  .res-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 600; color: var(--primary-hover); }
  .res-val { font-family: monospace; font-size: 18px; }

  .btn-calc-trans { width:100%; padding: 14px; border:none; border-radius: 12px; background:var(--primary); color:#fff; font-weight:700; font-size:16px; cursor:pointer; }
  .btn-calc-trans:hover { background: var(--primary-hover); }
</style>

<div class="container-transform">
  <div class="content-trans">
    <div class="input-group">
      <label>Ù†ÙˆØ¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„</label>
      <select id="transType" onchange="window.updateTransUI()">
        <option value="wgsToUtm">WGS84 (Lat/Lon) â†’ UTM</option>
        <option value="utmToWgs">UTM â†’ WGS84 (Lat/Lon)</option>
      </select>
    </div>

    <div id="ui-wgsToUtm" class="trans-ui">
        <div class="input-group">
          <label>Latitude (N)</label>
          <input type="number" id="inp-lat" placeholder="25.2048">
        </div>
        <div class="input-group">
          <label>Longitude (E)</label>
          <input type="number" id="inp-lon" placeholder="55.2708">
        </div>
    </div>

    <div id="ui-utmToWgs" class="trans-ui" style="display: none;">
        <div class="input-group">
          <label>Easting (X)</label>
          <input type="number" id="inp-utm-e" placeholder="500000">
        </div>
        <div class="input-group">
          <label>Northing (Y)</label>
          <input type="number" id="inp-utm-n" placeholder="2768000">
        </div>
        <div class="input-group">
          <label>UTM Zone</label>
          <input type="number" id="inp-utm-z" placeholder="40" value="40">
        </div>
    </div>

    <button class="btn-calc-trans" onclick="window.runTransform()">ØªØ­ÙˆÙŠÙ„ âœ¨</button>

    <div class="res-box-trans" id="resBoxTrans">
      <div id="res-content-trans"></div>
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button class="btn-nav-top" style="flex: 1;" onclick="window.copyTransformRes()">Ù†Ø³Ø® Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ðŸ“‹</button>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  window.updateTransUI = function() {
    const type = document.getElementById('transType').value;
    document.querySelectorAll('.trans-ui').forEach(el => el.style.display = 'none');
    document.getElementById('ui-' + type).style.display = 'block';
    document.getElementById('resBoxTrans').style.display = 'none';
  };

  window.runTransform = function() {
    const type = document.getElementById('transType').value;
    let resHtml = "";
    
    if (type === 'wgsToUtm') {
      const lat = parseFloat(document.getElementById('inp-lat').value);
      const lon = parseFloat(document.getElementById('inp-lon').value);
      if(isNaN(lat) || isNaN(lon)) return alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©');
      
      const zone = Math.floor((lon + 180) / 6) + 1;
      const utmProj = `+proj=utm +zone=${zone} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`;
      const result = proj4('EPSG:4326', utmProj, [lon, lat]);
      
      resHtml = `
        <div class="res-row"><span>Easting:</span> <span class="res-val">${result[0].toFixed(3)}</span></div>
        <div class="res-row"><span>Northing:</span> <span class="res-val">${result[1].toFixed(3)}</span></div>
        <div class="res-row"><span>UTM Zone:</span> <span class="res-val">${zone}N</span></div>
      `;
    } else {
      const e = parseFloat(document.getElementById('inp-utm-e').value);
      const n = parseFloat(document.getElementById('inp-utm-n').value);
      const z = parseInt(document.getElementById('inp-utm-z').value);
      if(isNaN(e) || isNaN(n) || isNaN(z)) return alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©');
      
      const utmProj = `+proj=utm +zone=${z} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`;
      const result = proj4(utmProj, 'EPSG:4326', [e, n]);
      
      resHtml = `
        <div class="res-row"><span>Latitude:</span> <span class="res-val">${result[1].toFixed(8)}</span></div>
        <div class="res-row"><span>Longitude:</span> <span class="res-val">${result[0].toFixed(8)}</span></div>
      `;
    }
    
    document.getElementById('res-content-trans').innerHTML = resHtml;
    document.getElementById('resBoxTrans').style.display = 'block';
  };

  window.copyTransformRes = function() {
    const text = document.getElementById('res-content-trans').innerText;
    navigator.clipboard.writeText(text).then(() => alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®!'));
  };
})();
</script>

<div class="standalone-footer" data-standalone-only="true" style="text-align: center; padding: 20px; margin-top: 40px; border-top: 1px solid #e2e8f0; color: #64748b; font-size: 14px;">
  <p>&copy; 2026 All rights reserved - GeoTools Suite</p>
</div>
</body>
</html>
